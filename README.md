# LinkChecker
Небольшой HTTP, который принимает список ссылок, проверяет их доступность и сохраняет результат.
Сервис может вернуть:
- JSON с результатами проверки ссылок;
- PDF-файл по номеру запроса, где уже собраны проверенные ссылки.

Хранилище - in-memory. После перезапуска данные пропадают.

# Маршруты
POST /links
Принимает массив ссылок для проверки.

Пример запроса:
```
{
  "links": ["google.com", "ya.ru", "example.org"]
}
```

Ответ:

```
{
  "links": {
    "google.com": "available",
    "ya.ru": "available",
    "example.org": "not available"
  },
  "links_num": 1
}
```

GET /links_num
Возвращает PDF-файл с результатами по указанным номерам запросов.

Пример запроса:
```
{
  "links_list": [1]
}
```

Ответ:

```
Content-Type: application/pdf
Content-Disposition: attachment; filename=report.pdf
```
PDF содержит ссылки и их статусы.
Если хотя бы один номер не найдем - ответ будет 404 Not Found.

# Обработка завершения сервера (graceful shutdown)
Сервес использует context и корректно завершает работу:
- при Ctrl + C или сигнале SIGTERM он перестает принимать новые запросы;
- текущие запросы могут завершиться в течение нескольких секунд;
- используется http.Server.Shutdown, что позволяет остановить сервер без обрыва обработки.

# Детали реализации
- Проверка ссылок делает через HTTP HEAD, при необходимости - через GET.
- При отсутствии схема (://) ссылка автоматически приводится к виду https://...
- Мапа для данных устроена совместно с suync.RWMutex, для потокобезопасности.
- PDF формируется через gofpdf
- Интерфейс хранилища объявлен в пакете handler, то есть в месте его использования.